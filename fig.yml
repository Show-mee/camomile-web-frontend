proxy:
    image: camomile/nginx-proxy
    volumes:
        - /var/run/docker.sock:/tmp/docker.sock
    ports:
        - "80:80"

database:
    image: mongo
    volumes:
        - /data/db

pyannote:
    image: pyannote/server

camomile:
    image: camomile/api:dev
    links:
        - pyannote
        - database:mongodb
    environment:
        - ROOT_PASSWORD=password
        - PORT=80
        - VIRTUAL_HOST=camomile
        - VIRTUAL_PORT=80
    volumes:
        - /media
    ports:
        - "80"

frontend:
    build: "."
    links:
        - camomile
    environment:
        - CAMOMILE_API=http://camomile
        - CAMOMILE_LOGIN=root
        - CAMOMILE_PASSWORD=password
